.set LOCALID_SAGEOFFICE_SAGE, 3

EcruteakSageOffice1F_MapScripts::
	map_script MAP_SCRIPT_ON_TRANSITION, EcruteakSageOffice1F_OnTransition
	.byte 0

EcruteakSageOffice1F_OnTransition::
	goto_if_ge VAR_ECRUTEAK_CITY_STATE, 11, EcruteakSageOffice1F_EventScript_SageAside @CHANGELATER
	end

EcruteakSageOffice1F_EventScript_SageAside::
	setobjectxyperm LOCALID_SAGEOFFICE_SAGE, 15, 2
	end

EcruteakSageOffice_EventScript_SageA::
	lock
	faceplayer
	goto_if_set FLAG_DEFEATED_HO_OH, EcruteakSageOffice_EventScript_SageA4
	goto_if_ge VAR_ECRUTEAK_CITY_STATE, 11, EcruteakSageOffice_EventScript_SageA3
	checkitem ITEM_CLEAR_BELL
	goto_if_eq VAR_RESULT, TRUE, EcruteakSageOffice_EventScript_SageA2
	msgbox EcruteakTinTowerEntrance_Text_SageNoBadge, MSGBOX_DEFAULT
	closemessage
	release
	end

EcruteakSageOffice_EventScript_SageA2::
	msgbox EcruteakTinTowerEntrance_Text_SageHearsClearBell1, MSGBOX_DEFAULT
	waitmessage
	playse SE_M_PETAL_DANCE
	waitse
	playse SE_PIN
	applymovement LOCALID_SAGEOFFICE_SAGE, Common_Movement_ExclamationMark
	delay 60
	msgbox EcruteakTinTowerEntrance_Text_SageHearsClearBell2, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_SAGEOFFICE_SAGE, EcruteakSageOffice_Movement_StandAside
	waitmovement 0
	setobjectxyperm LOCALID_SAGEOFFICE_SAGE, 15, 2
	setvar VAR_ECRUTEAK_CITY_STATE, 11
	release
	end

EcruteakSageOffice_EventScript_SageA3::
	msgbox EcruteakTinTowerEntrance_Text_SagePleaseDoGoOn, MSGBOX_DEFAULT
	closemessage
	release
	end

EcruteakSageOffice_EventScript_SageA4::
	msgbox EcruteakTinTowerEntrance_Text_SageDone, MSGBOX_DEFAULT
	closemessage
	release
	end
	
EcruteakSageOffice_EventScript_SageB::
	lock
	faceplayer
	goto_if_eq VAR_ECRUTEAK_CITY_STATE, 10, EcruteakSageOffice_EventScript_B2
	goto_if_eq VAR_ECRUTEAK_CITY_STATE, 11, EcruteakSageOffice_EventScript_B2
	msgbox EcruteakTinTowerEntrance_Text_WanderingSage, MSGBOX_DEFAULT
	closemessage
	release
	end

EcruteakSageOffice_EventScript_B2::
	msgbox EcruteakTinTowerEntrance_Text_WanderingSageClearBell, MSGBOX_DEFAULT
	closemessage
	release
	end

EcruteakSageOffice_EventScript_SageC::
	lock
	faceplayer
	msgbox EcruteakTinTowerEntrance_Text_Gramps, MSGBOX_DEFAULT
	closemessage
	release
	end

EcruteakSageOffice_Movement_StandAside:
	walk_left
	face_down
	step_end

EcruteakTinTowerEntrance_Text_SageNoBadge:
	.string "TIN TOWER is off limits to the\n"
	.string "unworthy. Sorry but you'll have\l"
	.string "to leave.$"

EcruteakTinTowerEntrance_Text_SageWithBadge:
	.string "TIN TOWER is off limits to anyone\n"
	.string "without ECRUTEAK GYM's BADGE.\p"
	.string "Ah!\p"
	.string "ECRUTEAK's GYM BADGE! Please, go\n"
	.string "right through.$"

EcruteakTinTowerEntrance_Text_SageNoClearBell:
	.string "A momentous event has occurred.\p"
	.string "I beg your pardon, but I must ask\n"
	.string "you to leave.\p"
	.string "…What soothes the soul…\p"
	.string "The WISE TRIO say things that are\n"
	.string "so very difficult to understand…$"

EcruteakTinTowerEntrance_Text_SageHearsClearBell1:
	.string "A momentous event has occurred.\p"
	.string "I beg your pardon, but I must ask\n"
	.string "you to leave.\p"
	.string "..............................$"
EcruteakTinTowerEntrance_Text_SageHearsClearBell2:
	.string "Ah!\p"
	.string "The sound of that CLEAR BELL!\p"
	.string "It… It's sublime!\p"
	.string "I've never heard so beautiful a\n"
	.string "sound before!\p"
	.string "That bell's chime is indicative of\n"
	.string "the bearer's soul.\p"
	.string "You…\p"
	.string "You may be able to make it through\n"
	.string "TIN TOWER.\p"
	.string "Please, do go on.$"

EcruteakTinTowerEntrance_Text_SagePleaseDoGoOn:
	.string "Please, do go on.$"

EcruteakTinTowerEntrance_Text_SageDone:
	.string "That bell's chime is indicative of\n"
	.string "the bearer's soul.\p"
	.string "You…\n"
	.string "Truly are worthy.$"

EcruteakTinTowerEntrance_Text_WanderingSage:
	.string "The TIN TOWER ahead is a nine-\n"
	.string "tier tower of divine beauty.\p"
	.string "It soothes the soul of all who\n"
	.string "see it.$"

EcruteakTinTowerEntrance_Text_WanderingSageClearBell:
	.string "The TIN TOWER shook! A POKéMON must\n"
	.string "have returned to the top!$"

EcruteakTinTowerEntrance_Text_Gramps:
	.string "Two towers… Two POKéMON…\p"
	.string "But when one burned down, both\n"
	.string "POKéMON flew away, never to return.$"
